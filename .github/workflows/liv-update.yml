name: Update SonyLIV hdnea and Upload to Hostinger

on:
  schedule:
    - cron: '0 */2 * * *'  # Runs every 2 hours
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Update Slivtv.json with current UTC time
        run: |
          TIME=$(date -u +"%Y-%m-%dT%H:%M:%S.%6NZ")
          cat > Slivtv.json <<EOF
{
  "updated": "$TIME",
  "source": "SonyLIV",
  "playlist": "#EXTM3U
# Created: $TIME UTC

#EXTINF:-1 tvg-id=\"2\" tvg-name=\"Sony SAB SD\" tvg-language=\"Hindi\" tvg-logo=\"https://i.ibb.co/svHcHWBz/x.jpg\" group-title=\"SONYLIV\" group-logo=\"https://www.sonypicturesnetworks.com/images/logos/Sony_LIV.png\", Sony SAB SD
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20SAB%20SD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysethd\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_HD.png\" group-title=\"Entertainment\",SET HD
https://livetv-cb7.pages.dev/Sonyliv?channel=SET%20HD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysabhd\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_SAB_HD.png\" group-title=\"Entertainment\",Sony SAB HD
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20SAB%20HD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonypal\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Pal.png\" group-title=\"Entertainment\",Sony PAL
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20PAL&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonyyay\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Yay_Hindi.png\" group-title=\"Kids\",Sony YAY
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20YAY&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonymarathi\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Marathi_SD.png\" group-title=\"Marathi\",Sony Marathii
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Marathii&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonyaath\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_aath.png\" group-title=\"Bengali\",Sony AATH
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20AATH&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonymaxhd\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Max_HD.png\" group-title=\"Movies\",Sony MAX HD
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20MAX%20HD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonymax\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/SET_MAX.png\" group-title=\"Movies\",Sony MAX
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20MAX&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonymax2\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_MAX2.png\" group-title=\"Movies\",Sony MAX 2
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20MAX%202&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonywah\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Wah.png\" group-title=\"Movies\",Sony WAH
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20WAH&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonypixhd\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_Pix_HD.png\" group-title=\"Movies\",Sony PIX HD
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20PIX%20HD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonybbcearthhd\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Sony_BBC_Earth_HD.png\" group-title=\"Infotainment\",Sony BBC Earth HD
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20BBC%20Earth%20HD&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysportsten1\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Ten_1.png\" group-title=\"Sports\",Sony Sports TEN 1
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Sports%20TEN%201&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysportsten2\" tvg-logo=\"https://jiotv.catchup.cdn.jio.com/dare_images/images/Ten_2.png\" group-title=\"Sports\",Sony Sports TEN 2
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Sports%20TEN%202&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysportsten3\" tvg-logo=\"http://jiotv.catchup.cdn.jio.com/dare_images/images/Ten_3.png\" group-title=\"Sports\",Sony Sports TEN 3
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Sports%20TEN%203&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysportsten4\" tvg-logo=\"https://www.sonypicturesnetworks.com/images/logos/SONY_SportsTen4_SD_Logo_CLR.png\" group-title=\"Sports\",Sony Sports TEN 4
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Sports%20TEN%204&token=Arg6u&type=.m3u8
#EXTINF:-1 tvg-id=\"sonysportsten5\" tvg-logo=\"https://www.sonypicturesnetworks.com/images/logos/SONY_SportsTen5_SD_Logo_CLR.png\" group-title=\"Sports\",Sony Sports TEN 5
https://livetv-cb7.pages.dev/Sonyliv?channel=Sony%20Sports%20TEN%205&token=Arg6u&type=.m3u8"
}
EOF

      - name: Commit and push changes
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"
          git add Slivtv.json
          git commit -m "ðŸ”„ Auto update Slivtv.json - $TIME" || echo "No changes to commit"
          git push

